$(document).ready(function($){
    //var twitterResponse = {"statuses":[{"contributors":null,"text":"Watching \"ShortCuts\" on my DVR via my Slingbox on NFL @Sunday_Ticket at work. This is living my friends. Yes indeed.","geo":null,"retweeted":false,"in_reply_to_screen_name":null,"truncated":false,"lang":"en","entities":{"symbols":[],"urls":[],"hashtags":[],"user_mentions":[{"id":313082319,"name":"Sunday Ticket ","indices":[54,68],"screen_name":"Sunday_Ticket","id_str":"313082319"}]},"in_reply_to_status_id_str":null,"id":376951370693083140,"source":"<a href=\"http://www.tweetdeck.com\" rel=\"nofollow\">TweetDeck</a>","in_reply_to_user_id_str":null,"favorited":false,"in_reply_to_status_id":null,"retweet_count":0,"created_at":"Mon Sep 09 06:13:04 +0000 2013","in_reply_to_user_id":null,"favorite_count":0,"id_str":"376951370693083136","place":null,"user":{"location":"New York City","default_profile":false,"profile_background_tile":false,"statuses_count":9693,"lang":"en","profile_link_color":"2FC2EF","id":17113555,"following":false,"protected":false,"favourites_count":439,"profile_text_color":"666666","description":"Comedic Integrity, now available in tweet size. http://t.co/mB9ZxTgy.","verified":false,"contributors_enabled":false,"profile_sidebar_border_color":"181A1E","name":"LaMott Jackson","profile_background_color":"1A1B1F","created_at":"Sun Nov 02 12:33:25 +0000 2008","default_profile_image":false,"followers_count":402,"profile_image_url_https":"https://si0.twimg.com/profile_images/813473951/IMG_5016_normal.JPG","geo_enabled":false,"profile_background_image_url":"http://a0.twimg.com/profile_background_images/336177761/twilk_background_4e7f323eba61f.jpg","profile_background_image_url_https":"https://si0.twimg.com/profile_background_images/336177761/twilk_background_4e7f323eba61f.jpg","follow_request_sent":false,"entities":{"description":{"urls":[{"expanded_url":"http://www.Witstream.com","indices":[49,69],"display_url":"Witstream.com","url":"http://t.co/mB9ZxTgy"}]},"url":{"urls":[{"expanded_url":"http://suchabastard.tumblr.com/","indices":[0,22],"display_url":"suchabastard.tumblr.com","url":"http://t.co/o18r2hUlTK"}]}},"url":"http://t.co/o18r2hUlTK","utc_offset":-14400,"time_zone":"Eastern Time (US & Canada)","notifications":false,"profile_use_background_image":true,"friends_count":488,"profile_sidebar_fill_color":"252429","screen_name":"lamottjackson","id_str":"17113555","profile_image_url":"http://a0.twimg.com/profile_images/813473951/IMG_5016_normal.JPG","listed_count":36,"is_translator":false},"coordinates":null,"metadata":{"result_type":"recent","iso_language_code":"en"}},{"contributors":null,"text":"Shout out to my uncle by helping me fix my slingbox!","geo":null,"retweeted":false,"in_reply_to_screen_name":null,"truncated":false,"lang":"en","entities":{"symbols":[],"urls":[],"hashtags":[],"user_mentions":[]},"in_reply_to_status_id_str":null,"id":376949169484611600,"source":"web","in_reply_to_user_id_str":null,"favorited":false,"in_reply_to_status_id":null,"retweet_count":0,"created_at":"Mon Sep 09 06:04:20 +0000 2013","in_reply_to_user_id":null,"favorite_count":0,"id_str":"376949169484611584","place":null,"user":{"location":"Melbourne, Australia","default_profile":true,"profile_background_tile":false,"statuses_count":4,"lang":"en","profile_link_color":"0084B4","id":1652245237,"following":false,"protected":false,"favourites_count":1,"profile_text_color":"333333","description":"Celsius : chip music enthusiast, and artist.*","verified":false,"contributors_enabled":false,"profile_sidebar_border_color":"C0DEED","name":"E Davoren-","profile_background_color":"C0DEED","created_at":"Wed Aug 07 06:29:19 +0000 2013","default_profile_image":false,"followers_count":17,"profile_image_url_https":"https://si0.twimg.com/profile_images/378800000365096329/1ed766ce5c540ec557f2fd8845b0458c_normal.jpeg","geo_enabled":false,"profile_background_image_url":"http://a0.twimg.com/images/themes/theme1/bg.png","profile_background_image_url_https":"https://si0.twimg.com/images/themes/theme1/bg.png","follow_request_sent":false,"entities":{"description":{"urls":[]},"url":{"urls":[{"expanded_url":"http://www.dpad.com.au","indices":[0,22],"display_url":"dpad.com.au","url":"http://t.co/lNlaPTrPk0"}]}},"url":"http://t.co/lNlaPTrPk0","utc_offset":null,"time_zone":null,"notifications":false,"profile_use_background_image":true,"friends_count":19,"profile_sidebar_fill_color":"DDEEF6","screen_name":"celsius_dpda","id_str":"1652245237","profile_image_url":"http://a0.twimg.com/profile_images/378800000365096329/1ed766ce5c540ec557f2fd8845b0458c_normal.jpeg","listed_count":0,"is_translator":false},"coordinates":null,"metadata":{"result_type":"recent","iso_language_code":"en"}},{"contributors":null,"text":"SlingPlayer Plugin 3.3.19.412 - Browser plug-in for viewing Slingbox units in Safari or Firefox. (Free): Slin... http://t.co/tAqaW4ixWw","geo":null,"retweeted":false,"in_reply_to_screen_name":null,"possibly_sensitive":false,"truncated":false,"lang":"en","entities":{"symbols":[],"urls":[{"expanded_url":"http://bit.ly/16cHQyM","indices":[114,136],"display_url":"bit.ly/16cHQyM","url":"http://t.co/tAqaW4ixWw"}],"hashtags":[],"user_mentions":[]},"in_reply_to_status_id_str":null,"id":376948169151496200,"source":"<a href=\"http://twitterfeed.com\" rel=\"nofollow\">twitterfeed</a>","in_reply_to_user_id_str":null,"favorited":false,"in_reply_to_status_id":null,"retweet_count":0,"created_at":"Mon Sep 09 06:00:21 +0000 2013","in_reply_to_user_id":null,"favorite_count":0,"id_str":"376948169151496192","place":null,"user":{"location":"web's","default_profile":true,"profile_background_tile":false,"statuses_count":343227,"lang":"en","profile_link_color":"0084B4","id":197653730,"following":false,"protected":false,"favourites_count":0,"profile_text_color":"333333","description":"internet","verified":false,"contributors_enabled":false,"profile_sidebar_border_color":"C0DEED","name":"aoll","profile_background_color":"C0DEED","created_at":"Sat Oct 02 02:40:25 +0000 2010","default_profile_image":false,"followers_count":4715,"profile_image_url_https":"https://si0.twimg.com/profile_images/3110577104/0ee2d2eb3e0f11e9fda239d1ce74d42a_normal.jpeg","geo_enabled":false,"profile_background_image_url":"http://a0.twimg.com/images/themes/theme1/bg.png","profile_background_image_url_https":"https://si0.twimg.com/images/themes/theme1/bg.png","follow_request_sent":false,"entities":{"description":{"urls":[]}},"url":null,"utc_offset":7200,"time_zone":"Amsterdam","notifications":false,"profile_use_background_image":true,"friends_count":2775,"profile_sidebar_fill_color":"DDEEF6","screen_name":"sonuise","id_str":"197653730","profile_image_url":"http://a0.twimg.com/profile_images/3110577104/0ee2d2eb3e0f11e9fda239d1ce74d42a_normal.jpeg","listed_count":21,"is_translator":false},"coordinates":null,"metadata":{"result_type":"recent","iso_language_code":"en"}},{"contributors":null,"text":"@RickSouza_ news europa no slingbox","geo":null,"retweeted":false,"in_reply_to_screen_name":"RickSouza_","truncated":false,"lang":"it","entities":{"symbols":[],"urls":[],"hashtags":[],"user_mentions":[{"id":43462979,"name":"Ricardo S","indices":[0,11],"screen_name":"RickSouza_","id_str":"43462979"}]},"in_reply_to_status_id_str":"376944480613855232","id":376944544946065400,"source":"<a href=\"http://www.tweetdeck.com\" rel=\"nofollow\">TweetDeck</a>","in_reply_to_user_id_str":"43462979","favorited":false,"in_reply_to_status_id":376944480613855200,"retweet_count":0,"created_at":"Mon Sep 09 05:45:57 +0000 2013","in_reply_to_user_id":43462979,"favorite_count":0,"id_str":"376944544946065408","place":null,"user":{"location":"alta definição","default_profile":false,"profile_background_tile":true,"statuses_count":69171,"lang":"pt","profile_link_color":"0084B4","profile_banner_url":"https://pbs.twimg.com/profile_banners/299331957/1378537367","id":299331957,"following":false,"protected":false,"favourites_count":1274,"profile_text_color":"333333","description":"Trabalhamos com HD. SD é crime.","verified":false,"contributors_enabled":false,"profile_sidebar_border_color":"FFFFFF","name":"Padre em HD","profile_background_color":"C0DEED","created_at":"Sun May 15 22:14:58 +0000 2011","default_profile_image":false,"followers_count":483,"profile_image_url_https":"https://si0.twimg.com/profile_images/378800000422631453/7c7e52e060ec9d7938c7df24ec917656_normal.jpeg","geo_enabled":false,"profile_background_image_url":"http://a0.twimg.com/profile_background_images/378800000049701443/aa2c24e36ec0b0dcfa0a40b625fd2a9f.png","profile_background_image_url_https":"https://si0.twimg.com/profile_background_images/378800000049701443/aa2c24e36ec0b0dcfa0a40b625fd2a9f.png","follow_request_sent":false,"entities":{"description":{"urls":[]},"url":{"urls":[{"expanded_url":"http://youtube.com/inutilidadesdopadre","indices":[0,22],"display_url":"youtube.com/inutilidadesdo…","url":"http://t.co/ym2yEoaLoi"}]}},"url":"http://t.co/ym2yEoaLoi","utc_offset":-7200,"time_zone":"Greenland","notifications":false,"profile_use_background_image":true,"friends_count":280,"profile_sidebar_fill_color":"DDEEF6","screen_name":"umtaldePadre","id_str":"299331957","profile_image_url":"http://a0.twimg.com/profile_images/378800000422631453/7c7e52e060ec9d7938c7df24ec917656_normal.jpeg","listed_count":4,"is_translator":false},"coordinates":null,"metadata":{"result_type":"recent","iso_language_code":"it"}},{"contributors":null,"text":"Absolutely energizing night with our brilliant new BTA's. Only downside? Slingbox issues Mutombo'ing my Breaking Bad nightcap #nospoilers","geo":null,"retweeted":false,"in_reply_to_screen_name":null,"truncated":false,"lang":"en","entities":{"symbols":[],"urls":[],"hashtags":[{"text":"nospoilers","indices":[128,139]}],"user_mentions":[]},"in_reply_to_status_id_str":null,"id":376934812306526200,"source":"web","in_reply_to_user_id_str":null,"favorited":false,"in_reply_to_status_id":null,"retweet_count":0,"created_at":"Mon Sep 09 05:07:17 +0000 2013","in_reply_to_user_id":null,"favorite_count":0,"id_str":"376934812306526208","place":null,"user":{"location":"Kansas City","default_profile":true,"profile_background_tile":false,"statuses_count":907,"lang":"en","profile_link_color":"0084B4","id":179980965,"following":false,"protected":false,"favourites_count":1,"profile_text_color":"333333","description":"CTO. Global Deloitte Digital Lead. Guitarist. Gamer. Film buff. Father. Husband. CPEG. Part-time philosopher. Full-time whiskey enthusiast.","verified":false,"contributors_enabled":false,"profile_sidebar_border_color":"C0DEED","name":"Bill Briggs","profile_background_color":"C0DEED","created_at":"Wed Aug 18 15:15:51 +0000 2010","default_profile_image":false,"followers_count":1052,"profile_image_url_https":"https://si0.twimg.com/profile_images/1440719749/Bill_-_GMA_-_Pinball_normal.JPG","geo_enabled":true,"profile_background_image_url":"http://a0.twimg.com/images/themes/theme1/bg.png","profile_background_image_url_https":"https://si0.twimg.com/images/themes/theme1/bg.png","follow_request_sent":false,"entities":{"description":{"urls":[]},"url":{"urls":[{"expanded_url":"http://www.deloitte.com/us/billbriggs","indices":[0,22],"display_url":"deloitte.com/us/billbriggs","url":"http://t.co/qECedfAbLu"}]}},"url":"http://t.co/qECedfAbLu","utc_offset":-18000,"time_zone":"Central Time (US & Canada)","notifications":false,"profile_use_background_image":true,"friends_count":132,"profile_sidebar_fill_color":"DDEEF6","screen_name":"wdbthree","id_str":"179980965","profile_image_url":"http://a0.twimg.com/profile_images/1440719749/Bill_-_GMA_-_Pinball_normal.JPG","listed_count":52,"is_translator":false},"coordinates":null,"metadata":{"result_type":"recent","iso_language_code":"en"}},{"contributors":null,"text":"Tech Check: Slingbox http://t.co/xsa7Jk7eTN @fox5atlanta","geo":null,"retweeted":false,"in_reply_to_screen_name":null,"possibly_sensitive":false,"truncated":false,"lang":"en","entities":{"symbols":[],"urls":[{"expanded_url":"http://bit.ly/1cX5W2n","indices":[21,43],"display_url":"bit.ly/1cX5W2n","url":"http://t.co/xsa7Jk7eTN"}],"hashtags":[],"user_mentions":[{"id":17836882,"name":"FOX 5 Atlanta","indices":[44,56],"screen_name":"FOX5Atlanta","id_str":"17836882"}]},"in_reply_to_status_id_str":null,"id":376916824350150660,"source":"<a href=\"http://twitterfeed.com\" rel=\"nofollow\">twitterfeed</a>","in_reply_to_user_id_str":null,"favorited":false,"in_reply_to_status_id":null,"retweet_count":0,"created_at":"Mon Sep 09 03:55:48 +0000 2013","in_reply_to_user_id":null,"favorite_count":0,"id_str":"376916824350150657","place":null,"user":{"location":"Atlanta,GA","default_profile":false,"profile_background_tile":true,"statuses_count":50212,"lang":"en","profile_link_color":"85160F","profile_banner_url":"https://pbs.twimg.com/profile_banners/18435438/1378158375","id":18435438,"following":false,"protected":false,"favourites_count":136,"profile_text_color":"333333","description":"Coverage of #Breaking #News & #Severe #Weather for #Atlanta #GA! No opinions, just the facts! Also follow @channel1america @channel1world @stormwchamerica","verified":false,"contributors_enabled":false,"profile_sidebar_border_color":"000000","name":"Channel 1 Atlanta","profile_background_color":"000000","created_at":"Sun Dec 28 22:17:21 +0000 2008","default_profile_image":false,"followers_count":1263,"profile_image_url_https":"https://si0.twimg.com/profile_images/378800000402262743/33bd59f3f1ace6b47db6fbad2c04d638_normal.jpeg","geo_enabled":false,"profile_background_image_url":"http://a0.twimg.com/profile_background_images/378800000065525240/ff6ce736d8cab2167e95be172042f2d6.jpeg","profile_background_image_url_https":"https://si0.twimg.com/profile_background_images/378800000065525240/ff6ce736d8cab2167e95be172042f2d6.jpeg","follow_request_sent":false,"entities":{"description":{"urls":[]},"url":{"urls":[{"expanded_url":"http://channeloneatlanta.wordpress.com","indices":[0,22],"display_url":"channeloneatlanta.wordpress.com","url":"http://t.co/lTaOWPWGtq"}]}},"url":"http://t.co/lTaOWPWGtq","utc_offset":-14400,"time_zone":"Eastern Time (US & Canada)","notifications":false,"profile_use_background_image":true,"friends_count":2001,"profile_sidebar_fill_color":"C0DFEC","screen_name":"channel1atlanta","id_str":"18435438","profile_image_url":"http://a0.twimg.com/profile_images/378800000402262743/33bd59f3f1ace6b47db6fbad2c04d638_normal.jpeg","listed_count":69,"is_translator":false},"coordinates":null,"metadata":{"result_type":"recent","iso_language_code":"en"}},{"contributors":null,"text":"LOCAL: Tech Check: Slingbox http://t.co/Prf8A9nDLD","geo":null,"retweeted":false,"in_reply_to_screen_name":null,"possibly_sensitive":false,"truncated":false,"lang":"en","entities":{"symbols":[],"urls":[{"expanded_url":"http://bit.ly/1eunFjh","indices":[28,50],"display_url":"bit.ly/1eunFjh","url":"http://t.co/Prf8A9nDLD"}],"hashtags":[],"user_mentions":[]},"in_reply_to_status_id_str":null,"id":376912812754612200,"source":"<a href=\"http://ifttt.com\" rel=\"nofollow\">IFTTT</a>","in_reply_to_user_id_str":null,"favorited":false,"in_reply_to_status_id":null,"retweet_count":0,"created_at":"Mon Sep 09 03:39:51 +0000 2013","in_reply_to_user_id":null,"favorite_count":0,"id_str":"376912812754612225","place":null,"user":{"location":"Atlanta, GA","default_profile":false,"profile_background_tile":true,"statuses_count":20245,"lang":"en","profile_link_color":"009999","profile_banner_url":"https://pbs.twimg.com/profile_banners/87266097/1358383282","id":87266097,"following":false,"protected":false,"favourites_count":6,"profile_text_color":"333333","description":"Atlanta happenings, news, reviews and opinions.","verified":false,"contributors_enabled":false,"profile_sidebar_border_color":"EEEEEE","name":"Atlanta In Motion","profile_background_color":"131516","created_at":"Tue Nov 03 19:44:09 +0000 2009","default_profile_image":false,"followers_count":4207,"profile_image_url_https":"https://si0.twimg.com/profile_images/507266654/Centennial_Olympic_Park__Atlanta__Georgia_normal.jpg","geo_enabled":true,"profile_background_image_url":"http://a0.twimg.com/images/themes/theme14/bg.gif","profile_background_image_url_https":"https://si0.twimg.com/images/themes/theme14/bg.gif","follow_request_sent":false,"entities":{"description":{"urls":[]}},"url":null,"utc_offset":-14400,"time_zone":"Eastern Time (US & Canada)","notifications":false,"profile_use_background_image":true,"friends_count":4622,"profile_sidebar_fill_color":"EFEFEF","screen_name":"AtlantaInMotion","id_str":"87266097","profile_image_url":"http://a0.twimg.com/profile_images/507266654/Centennial_Olympic_Park__Atlanta__Georgia_normal.jpg","listed_count":131,"is_translator":false},"coordinates":null,"metadata":{"result_type":"recent","iso_language_code":"en"}},{"contributors":null,"text":"A full day of Slingbox on my Moto X on NFL opening day...battery, reception, and display are outstanding. Doesn't get hot either.","geo":null,"retweeted":false,"in_reply_to_screen_name":null,"truncated":false,"lang":"en","entities":{"symbols":[],"urls":[],"hashtags":[],"user_mentions":[]},"in_reply_to_status_id_str":null,"id":376909035234013200,"source":"web","in_reply_to_user_id_str":null,"favorited":false,"in_reply_to_status_id":null,"retweet_count":0,"created_at":"Mon Sep 09 03:24:51 +0000 2013","in_reply_to_user_id":null,"favorite_count":0,"id_str":"376909035234013185","place":null,"user":{"location":"","default_profile":true,"profile_background_tile":false,"statuses_count":268,"lang":"en","profile_link_color":"0084B4","id":50166042,"following":false,"protected":false,"favourites_count":192,"profile_text_color":"333333","description":"","verified":false,"contributors_enabled":false,"profile_sidebar_border_color":"C0DEED","name":"MJL","profile_background_color":"C0DEED","created_at":"Wed Jun 24 01:14:58 +0000 2009","default_profile_image":false,"followers_count":12,"profile_image_url_https":"https://si0.twimg.com/profile_images/378800000334742507/11979bb865d1bc25b4f6adbc79b0af65_normal.jpeg","geo_enabled":false,"profile_background_image_url":"http://a0.twimg.com/images/themes/theme1/bg.png","profile_background_image_url_https":"https://si0.twimg.com/images/themes/theme1/bg.png","follow_request_sent":false,"entities":{"description":{"urls":[]}},"url":null,"utc_offset":null,"time_zone":null,"notifications":false,"profile_use_background_image":true,"friends_count":86,"profile_sidebar_fill_color":"DDEEF6","screen_name":"Melabruha","id_str":"50166042","profile_image_url":"http://a0.twimg.com/profile_images/378800000334742507/11979bb865d1bc25b4f6adbc79b0af65_normal.jpeg","listed_count":0,"is_translator":false},"coordinates":null,"metadata":{"result_type":"recent","iso_language_code":"en"}},{"contributors":null,"text":"昼休みにslingbox使って予約しよう。持っててよかったslingbox（ステマ","geo":null,"retweeted":false,"in_reply_to_screen_name":null,"truncated":false,"lang":"ja","entities":{"symbols":[],"urls":[],"hashtags":[],"user_mentions":[]},"in_reply_to_status_id_str":null,"id":376900528325677060,"source":"web","in_reply_to_user_id_str":null,"favorited":false,"in_reply_to_status_id":null,"retweet_count":0,"created_at":"Mon Sep 09 02:51:03 +0000 2013","in_reply_to_user_id":null,"favorite_count":0,"id_str":"376900528325677056","place":null,"user":{"location":"兵庫県","default_profile":true,"profile_background_tile":false,"statuses_count":86322,"lang":"ja","profile_link_color":"0084B4","id":98564835,"following":false,"protected":false,"favourites_count":46,"profile_text_color":"333333","description":"へんなにんげんでごめんなさい。\r\nもう広島にはいないよ。\r\nほしいものりすと。　http://t.co/GoYHRsw2","verified":false,"contributors_enabled":false,"profile_sidebar_border_color":"C0DEED","name":"かずみ","profile_background_color":"C0DEED","created_at":"Tue Dec 22 06:07:01 +0000 2009","default_profile_image":false,"followers_count":286,"profile_image_url_https":"https://si0.twimg.com/profile_images/3216847262/a5a570624ab8569dcdf1b28e5147de1d_normal.png","geo_enabled":false,"profile_background_image_url":"http://a0.twimg.com/images/themes/theme1/bg.png","profile_background_image_url_https":"https://si0.twimg.com/images/themes/theme1/bg.png","follow_request_sent":false,"entities":{"description":{"urls":[{"expanded_url":"http://www.amazon.co.jp/registry/wishlist/1MYJ24REVZT6B","indices":[40,60],"display_url":"amazon.co.jp/registry/wishl…","url":"http://t.co/GoYHRsw2"}]}},"url":null,"utc_offset":32400,"time_zone":"Tokyo","notifications":false,"profile_use_background_image":true,"friends_count":208,"profile_sidebar_fill_color":"DDEEF6","screen_name":"kazmixworld","id_str":"98564835","profile_image_url":"http://a0.twimg.com/profile_images/3216847262/a5a570624ab8569dcdf1b28e5147de1d_normal.png","listed_count":25,"is_translator":false},"coordinates":null,"metadata":{"result_type":"recent","iso_language_code":"ja"}}],"search_metadata":{"since_id":0,"count":10,"max_id":376951370693083140,"refresh_url":"?since_id=376951370693083136&q=slingbox&result_type=mixed&include_entities=1","query":"slingbox","max_id_str":"376951370693083136","since_id_str":"0","completed_in":0.013}};
    
    TwitterSentimentAnalyser.formatTweets = function(twitterResponse){
        var statusList = twitterResponse.statuses;
        var tweetTemplateObj = null;
        var tweetTemplate = _.template($('#tweetDisplayTemplate').html());
        $("#searchResultsContainer").empty();
        var genId = [];
		var showRetweets = parseInt($('input[name="includeRetweets"]:checked').val());
        for(var i=0,iLen=statusList.length;i<iLen;i++) {
            genId.push(statusList[i].user.name, statusList[i].user.screen_name, statusList[i].text, statusList[i].created_at);
            hashId = CryptoJS.SHA1(genId.join(''));
			genId.length = 0;
            var tweetText = statusList[i].text;
			if(0 === showRetweets && 'retweeted_status' in statusList[i]) {
				continue;
			}
            tweetTemplateObj = {
                twitterActualName:statusList[i].user.name,
                twitterUserName:statusList[i].user.screen_name,
                tweetText:statusList[i].text,
                tweetTime:statusList[i].created_at,
                "hashId":hashId
            };
            $("#searchResultsContainer").append(tweetTemplate(tweetTemplateObj));
            TwitterSentimentAnalyser.analyseTweets(statusList[i].text, hashId);
            
        }
    };
    
    TwitterSentimentAnalyser.analyseTweets = function (tweetText, hashId) {
		var processedTweetText = tweetText.replace(/[^A-Za-z 0-9 \.,\?""!@#\$%\^&\*\(\)-_=\+;:<>\/\\\|\}\{\[\]`~]*/g, '');
        $.ajax({
            url:"http://sapy27-sharathbs.rhcloud.com/analyse_sentiment",
            type:"POST",
            dataType:"json",
            data: {
                "tweetText":processedTweetText
            },
            crossDomain:true,
            success: function (data) {
                /*console.log(JSON.stringify(data));
                var polarity = parseFloat(data.sentiment);
				var classToBeAppended = 'neutral';
                if (polarity >= -1 && polarity < 0) {
                    classToBeAppended = 'negative';
                } else if (polarity === 0) {
                    classToBeAppended = 'neutral';
                } else if (polarity > 0 && polarity <= 1) {
                    classToBeAppended = 'positive';
                } else {
                    classToBeAppended = 'neutral';
                }*/
				var sentiment = data.sentiment;
				var classToBeAppended = 'neutral';
				switch (sentiment) {
					case "positive":
						classToBeAppended = 'positive';
						break;
					case "negative":
						classToBeAppended = 'negative';
						break;
					case "neutral":
						classToBeAppended = 'neutral';
						break;
				}
                $('[data-id="'+hashId+'"]').removeClass('neutral').addClass(classToBeAppended);
            },
            error: function (xhr, errorType, errorDescription) {
                console.error(errorType);
            }
        });
    
    };
    
    TwitterSentimentAnalyser.UIManager.showLoadingOverlay = function(show){
        if(true === show) {
            $('#searchLoadingOverlay,#searchLoadingOverlayTextContainer').show();
        } else {
            $('#searchLoadingOverlay,#searchLoadingOverlayTextContainer').hide();
        }
    };
    
    
    
    
    $('#twitterSearchBox').unbind('keypress').bind('keypress',function(event){
        var keyCode = event.keyCode;
        if(13 === keyCode){
            $('#twitterSearch').click();
        }
    });
    
    $('#twitterSearch').unbind('click').bind('click',function(){
        //Show loading overlay
        TwitterSentimentAnalyser.UIManager.showLoadingOverlay(true);
        $.ajax("/twitterSA/application/searchTweets",{
            data:{
                searchString:encodeURIComponent($.trim($("#twitterSearchBox").val()))
            },
            dataType:"json",
            success: function (data) {
                //$("#searchResultsContainer").text("").text(JSON.stringify(data));
                TwitterSentimentAnalyser.UIManager.showLoadingOverlay(false);
                TwitterSentimentAnalyser.formatTweets(data);
            },
            error: function () {
                TwitterSentimentAnalyser.UIManager.showLoadingOverlay(false);
                $("#searchResultsContainer").text("").text("Error occurred");
            },
            timeout:30000
        });
    });
    
    
    
});